<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ìš°ë¦¬ëŒ•ëƒ¥ì´ë“¤ ê±´ê°•ê´€ë¦¬ íˆ´</title>
  <style>
    * { box-sizing: border-box; }
    body { font-family: Arial, sans-serif; padding: 20px; margin: auto; max-width: 720px; }
    h2, h3 { text-align: center; margin-bottom: 10px; }
    .tabs { display: flex; flex-wrap: wrap; justify-content: space-between; margin-bottom: 20px; }
    .tabs button {
      flex: 1 1 48%;
      margin: 5px 0;
      padding: 10px;
      font-size: 16px;
      background-color: #007bff;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    .tabs button.active { background-color: #0056b3; }
    label { display: block; margin-top: 10px; font-weight: bold; }
    input, select, button {
      width: 100%; padding: 8px; margin-top: 5px; font-size: 16px; border-radius: 4px; border: 1px solid #ccc;
    }
    .section { display: none; margin-top: 20px; }
    .section.active { display: block; }
    .note, .result {
      margin-top: 15px; padding: 10px; background: #f9f9f9; border-left: 4px solid #007bff;
      white-space: pre-line;
    }
    .profile-list button { margin: 5px 5px 0 0; }
  </style>
</head>
<body>
  <h2>ìš°ë¦¬ëŒ•ëƒ¥ì´ë“¤ ê±´ê°•ê´€ë¦¬ íˆ´</h2>

  <div>
    <h3>ìš°ë¦¬ ëŒ•ëƒ¥ì´ ë“±ë¡í•˜ê¸°</h3>
    <label>ì´ë¦„:</label><input type="text" id="petName">
    <label>ìƒì¼:</label><input type="date" id="petBirth">
    <label>ì¢…ë¥˜:</label>
    <select id="petType">
      <option value="dog">ëŒ•ì´ (ê°•ì•„ì§€)</option>
      <option value="cat">ëƒ¥ì´ (ê³ ì–‘ì´)</option>
    </select>
    <button onclick="addPet()">ëŒ•ëƒ¥ì´ ë“±ë¡</button>
    <div class="note profile-list" id="petList"></div>
  </div>

  <div class="tabs">
    <button onclick="showSection('food')">ì‚¬ë£Œ ê³„ì‚°ê¸°</button>
    <button onclick="showSection('age')">ë‚˜ì´ ê³„ì‚°ê¸°</button>
    <button onclick="showSection('vacc')">ì˜ˆë°©ì ‘ì¢…</button>
  </div>

  <div id="food" class="section">
    <h3>ì‚¬ë£Œ ê³„ì‚°ê¸°</h3>
    <label>ì²´ì¤‘ (kg):</label><input type="number" id="weight">
    <label>ì‚¬ë£Œ 100gë‹¹ ì¹¼ë¡œë¦¬ (kcal):</label><input type="number" id="calorie">
    <label>í™œë™ëŸ‰:</label>
    <select id="activity">
      <option value="low">ì €í™œë™</option>
      <option value="normal" selected>ë³´í†µ</option>
      <option value="high">ê³ í™œë™</option>
    </select>
    <label>ì—°ë ¹ëŒ€:</label>
    <select id="ageGroup">
      <option value="young">ì–´ë¦°</option>
      <option value="adult" selected>ì„±ê²¬/ì„±ë¬˜</option>
      <option value="senior">ë…¸ë ¹</option>
    </select>
    <label>ë‹¨ìœ„ ì„ íƒ:</label>
    <select id="unit">
      <option value="g">ê·¸ë¨ (g)</option>
      <option value="cup">ì»µ (100g ê¸°ì¤€)</option>
    </select>
    <label>ë³´ìœ  ì‚¬ë£ŒëŸ‰ (kg):</label><input type="number" id="totalFood">
    <label>ë§ˆë¦¬ ìˆ˜:</label><input type="number" id="petCount" value="1">
    <button onclick="calcFood()">ê³„ì‚°í•˜ê¸°</button>
    <div class="result" id="foodResult"></div>
  </div>

  <div id="age" class="section">
    <h3>ë‚˜ì´ ê³„ì‚°ê¸°</h3>
    <button onclick="calcAge()">ë‚˜ì´ ê³„ì‚°</button>
    <div class="result" id="ageResult"></div>
  </div>

  <div id="vacc" class="section">
    <h3>ì˜ˆë°©ì ‘ì¢… ì•ˆë‚´</h3>
    <button onclick="showVaccinationSchedule()">ê¸°ë³¸ ì ‘ì¢… ìŠ¤ì¼€ì¤„ í™•ì¸</button>
    <div class="result" id="vaccResult"></div>
    <button onclick="copyVaccSchedule()">ğŸ“‹ ë³µì‚¬í•˜ê¸°</button>
    <button onclick="shareVaccSchedule()">ğŸ”— ê³µìœ í•˜ê¸°</button>
  </div>

  <script>
    const pets = [];
    function addPet() {
      const name = document.getElementById('petName').value;
      const birth = document.getElementById('petBirth').value;
      const type = document.getElementById('petType').value;
      if (!name || !birth) return alert('ëª¨ë“  í•­ëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
      pets.push({ name, birth, type });
      document.getElementById('petList').innerHTML = pets.map(p => `<button>${p.name}</button>`).join('');
      alert(`${name} ë“±ë¡ ì™„ë£Œ!`);
    }
    function showSection(id) {
      document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
      document.querySelectorAll('.tabs button').forEach(b => b.classList.remove('active'));
      document.getElementById(id).classList.add('active');
      document.querySelector(`.tabs button[onclick*='${id}']`)?.classList.add('active');
    }
    function calcFood() {
      const weight = parseFloat(document.getElementById('weight').value);
      const kcal = parseFloat(document.getElementById('calorie').value);
      const activity = document.getElementById('activity').value;
      const age = document.getElementById('ageGroup').value;
      const unit = document.getElementById('unit').value;
      const totalFoodKg = parseFloat(document.getElementById('totalFood').value);
      const petCount = parseInt(document.getElementById('petCount').value);
      let base = 100;
      if (age === 'young') base *= 1.2;
      if (age === 'senior') base *= 0.9;
      if (activity === 'low') base *= 0.8;
      if (activity === 'high') base *= 1.2;
      const daily = weight * base;
      const grams = (daily / kcal) * 100;
      const cups = grams / 100;
      const totalGrams = totalFoodKg * 1000;
      const dailyTotalGrams = grams * petCount;
      const duration = Math.floor(totalGrams / dailyTotalGrams);
      const display = unit === 'cup'
        ? `í•˜ë£¨ í•„ìš” ì‚¬ë£ŒëŸ‰: ì•½ ${cups.toFixed(2)}ì»µ\nì´ ${petCount}ë§ˆë¦¬ ê¸°ì¤€ ì†Œë¹„: ${(cups * petCount).toFixed(2)}ì»µ\në³´ìœ  ì‚¬ë£Œ ì†Œìš” ê¸°ê°„: ì•½ ${duration}ì¼`
        : `í•˜ë£¨ í•„ìš” ì‚¬ë£ŒëŸ‰: ì•½ ${grams.toFixed(1)}g\nì´ ${petCount}ë§ˆë¦¬ ê¸°ì¤€ ì†Œë¹„: ${(grams * petCount).toFixed(1)}g\në³´ìœ  ì‚¬ë£Œ ì†Œìš” ê¸°ê°„: ì•½ ${duration}ì¼`;
      document.getElementById('foodResult').innerText = display;
    }
    function calcAge() {
      if (pets.length === 0) return alert('ëŒ•ëƒ¥ì´ë¥¼ ë¨¼ì € ë“±ë¡í•´ì£¼ì„¸ìš”.');
      const birth = new Date(pets[0].birth);
      const today = new Date();
      const months = (today.getFullYear() - birth.getFullYear()) * 12 + today.getMonth() - birth.getMonth();
      const type = pets[0].type;
      let humanAge = months <= 24 ? months * 0.75 : 15 + (months - 24) * (type === 'dog' ? 0.5 : 0.6);
      document.getElementById('ageResult').innerText = `ëŒ•ëƒ¥ì´ ë‚˜ì´: ${months}ê°œì›” / ì‚¬ëŒ ë‚˜ì´ í™˜ì‚°: ì•½ ${Math.round(humanAge)}ì„¸`;
    }
    function showVaccinationSchedule() {
      if (pets.length === 0) {
        document.getElementById('vaccResult').innerHTML = 'ë¨¼ì € ëŒ•ëƒ¥ì´ë¥¼ ë“±ë¡í•´ì£¼ì„¸ìš”.';
        return;
      }
      const type = pets[0].type;
      let html = '<strong>ê¸°ë³¸ ì˜ˆë°©ì ‘ì¢… ìŠ¤ì¼€ì¤„:</strong><br>';
      if (type === 'dog') {
        html += 'ìƒí›„ 6~8ì£¼: ì¢…í•©ë°±ì‹  1ì°¨ (DHPPL), ì½”ë¡œë‚˜ (ì„ íƒ), ì¼„ë„¬ì½”í”„<br>';
        html += 'ìƒí›„ 8~10ì£¼: ì¢…í•©ë°±ì‹  2ì°¨, ì½”ë¡œë‚˜ 2ì°¨ (ì„ íƒ)<br>';
        html += 'ìƒí›„ 10~12ì£¼: ì¢…í•©ë°±ì‹  3ì°¨, ê´‘ê²¬ë³‘ 1ì°¨<br>';
        html += '1ë…„ ì´ìƒ: ì¢…í•© + ê´‘ê²¬ë³‘ ë§¤ë…„ 1íšŒ<br>';
      } else {
        html += 'ìƒí›„ 6~8ì£¼: ì¢…í•©ë°±ì‹  1ì°¨ (FVRCP)<br>';
        html += 'ìƒí›„ 8~10ì£¼: ì¢…í•©ë°±ì‹  2ì°¨<br>';
        html += 'ìƒí›„ 10~12ì£¼: ì¢…í•©ë°±ì‹  3ì°¨, ê´‘ê²¬ë³‘ 1ì°¨<br>';
        html += '1ë…„ ì´ìƒ: ì¢…í•© + ê´‘ê²¬ë³‘ ë§¤ë…„ 1íšŒ<br>';
      }
      html += '<p style="font-size:0.9em; color:#555; margin-top:10px;">â€» ì½”ë¡œë‚˜ ë°±ì‹ ì€ Canine Coronavirus(CCoV)ì— ëŒ€í•œ ë°±ì‹ ìœ¼ë¡œ, í•„ìˆ˜ëŠ” ì•„ë‹ˆë©° ìˆ˜ì˜ì‚¬ì˜ íŒë‹¨ì— ë”°ë¼ ì„ íƒì ìœ¼ë¡œ ì ‘ì¢…í•©ë‹ˆë‹¤.<br>â€» ì¶œì²˜: WSAVA, AVMA, ëŒ€í•œìˆ˜ì˜ì‚¬íšŒ</p>';
      document.getElementById('vaccResult').innerHTML = html;
    }
    function copyVaccSchedule() {
      const el = document.createElement('textarea');
      el.value = document.getElementById('vaccResult').innerText;
      document.body.appendChild(el);
      el.select();
      document.execCommand('copy');
      document.body.removeChild(el);
      alert('ì˜ˆë°©ì ‘ì¢… ìŠ¤ì¼€ì¤„ì´ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
    }
    function shareVaccSchedule() {
      const text = document.getElementById('vaccResult').innerText;
      if (navigator.share) {
        navigator.share({ title: 'ìš°ë¦¬ëŒ•ëƒ¥ì´ ì˜ˆë°©ì ‘ì¢…', text });
      } else {
        alert('ê³µìœ  ê¸°ëŠ¥ì€ ëª¨ë°”ì¼ ë¸Œë¼ìš°ì € ë˜ëŠ” ì¼ë¶€ ë¸Œë¼ìš°ì €ì—ì„œë§Œ ì§€ì›ë©ë‹ˆë‹¤.');
      }
    }
    showSection('food');
  </script>
</body>
</html>
