<script>
    const pets = [];
    function addPet() {
      const name = document.getElementById('petName').value;
      const birth = document.getElementById('petBirth').value;
      const type = document.getElementById('petType').value;
      if (!name || !birth) return alert('모든 항목을 입력해주세요.');
      pets.push({ name, birth, type });
      document.getElementById('petList').innerHTML = pets.map(p => `<button>${p.name}</button>`).join('');
      alert(`${name} 등록 완료!`);
    }
    function showSection(id) {
      document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
      document.querySelectorAll('.tabs button').forEach(b => b.classList.remove('active'));
      document.getElementById(id).classList.add('active');
      const buttons = document.querySelectorAll('.tabs button');
      buttons.forEach(btn => {
        if (btn.getAttribute('onclick')?.includes(id)) btn.classList.add('active');
      });
    }
    function calcFood() {
      const weight = parseFloat(document.getElementById('weight').value);
      const kcal = parseFloat(document.getElementById('calorie').value);
      const activity = document.getElementById('activity').value;
      const age = document.getElementById('ageGroup').value;
      let base = 100;
      if (age === 'young') base *= 1.2;
      if (age === 'senior') base *= 0.9;
      if (activity === 'low') base *= 0.8;
      if (activity === 'high') base *= 1.2;
      const daily = weight * base;
      const grams = (daily / kcal) * 100;
      document.getElementById('foodResult').innerText = `하루 필요 사료량: 약 ${grams.toFixed(1)}g`;
    }
    function calcAge() {
      if (pets.length === 0) return alert('댕냥이를 먼저 등록해주세요.');
      const birth = new Date(pets[0].birth);
      const today = new Date();
      const months = (today.getFullYear() - birth.getFullYear()) * 12 + today.getMonth() - birth.getMonth();
      const type = pets[0].type;
      let humanAge = months <= 24 ? months * 0.75 : 15 + (months - 24) * (type === 'dog' ? 0.5 : 0.6);
      document.getElementById('ageResult').innerText = `댕냥이 나이: ${months}개월 / 사람 나이 환산: 약 ${Math.round(humanAge)}세`;
    }
    function showVaccinationSchedule() {
      const html = `
        <strong>기본 예방접종 스케줄:</strong><br>
        생후 2개월: 종합백신 1차<br>
        생후 3개월: 종합백신 2차 + 광견병<br>
        생후 4개월: 종합백신 3차<br>
        이후 매년 종합 + 광견병 1회`;
      document.getElementById('vaccResult').innerHTML = html;
    }
    function checkSnack() {
      const current = parseFloat(document.getElementById('currentWeight').value);
      const ideal = parseFloat(document.getElementById('idealWeight').value);
      const snack = parseFloat(document.getElementById('snack').value);
      const daily = parseFloat(document.getElementById('daily').value);
      const resultBox = document.getElementById('weightResult');
      if (!current || !ideal || !snack || !daily || isNaN(current) || isNaN(ideal) || isNaN(snack) || isNaN(daily)) {
        resultBox.innerText = '모든 값을 정확히 입력해주세요.';
        return;
      }
      let result = `간식 비율: ${(snack / daily * 100).toFixed(1)}%\n`;
      if (snack / daily > 0.1) result += '⚠️ 간식 비율이 높습니다.\n';
      if (current > ideal + 1) result += '⚠️ 과체중일 수 있어요.\n';
      else if (current < ideal - 1) result += '⚠️ 저체중일 수 있어요.\n';
      else result += '✅ 적정 체중입니다.\n';
      resultBox.innerText = result;
    }
    showSection('food');
  </script>
